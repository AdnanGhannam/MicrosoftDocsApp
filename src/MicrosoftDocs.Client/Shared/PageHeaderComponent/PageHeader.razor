@using MicrosoftDocs.Client.Models
@using MicrosoftDocs.Client.Shared.ItemsListComponent;

<header class="@($"page-header { Class }")">
    <div class="page-header__left">
        <ItemsList>
            <ItemsListItem Href="@Href" Class="page-header__left__item">
                @Title
            </ItemsListItem>
            @foreach(var item in Items)
            {
                @if(item.Items?.Count > 0)
                {
                    <ItemsListItem Class="page-header__left__item">
                        <Icon>
                            <MudIcon Icon="@item.Icon" />
                        </Icon>
                        <ChildContent>
                                <MudMenu Label="@item.Label" Color="Color.Inherit" ListClass="page-header__expansion-list"
                                            AnchorOrigin="Origin.BottomLeft" TransformOrigin="Origin.TopLeft">
                                    @foreach(var (key, value) in item.Items)
                                    {
                                        <MudMenuItem>
                                            <NavLink href="@key" class="@(key.StartsWith('/') ? "" : "outer-link")">
                                                @value
                                            </NavLink>
                                        </MudMenuItem>
                                    }
                            </MudMenu>
                        </ChildContent>
                    </ItemsListItem>
                }
                else
                {
                    <ItemsListItem>
                        <NavLink href="@item.Url">
                            @item.Label
                        </NavLink>
                    </ItemsListItem>
                }
            }
        </ItemsList>
    </div>

    <div class="page-header__right">
        @ChildContent
    </div>
</header>

@code {
    [Parameter]
    public string Class { get; set; } = "";

    [Parameter]
    public string Title { get; set; } = "";

    [Parameter]
    public string? Href { get; set; }

    [Parameter]
    public RenderFragment ChildContent { get; set; }

    [Parameter]
    public List<PageHeaderItemModel> Items { get; set; } = new();
}
